<!DOCTYPE html>
<html lang="es">
<script src="date.js"></script>
<script src="./jquery-3.4.1.min.js"></script>
<head>
    <title>Exercizo Date 4</title>
    <meta charset="utf-8" />
</head>
<body onload="date4()">

    <h1>Actividade Date 4</h1>
    <p>Crea unha conta atrás dunha data en formato quedan aa ANOS mm MESES dd DIAS hh HORAS mm MINUTOS ss SEGUNDOS. Nota: a mensaxe será o máis reducida posible, é dicir, se quedan 5 horas e 40 minutos non hai por que amosar anos, meses e días.</p>
    <div id="contaAtras"></div>
    <div id="fin"></div>
    <script>
        /* DATE 4 */
function contaAtras() {
  var fin = new Date(2021, 4, 28);
  var actual = new Date();
  var ano, mes, dia, hora, min, sec,divConta;
  $('#fin').html("Fecha fin da conta atrás: " + fin);
  if (actual < fin) {
    ano = fin.getFullYear() - (actual.getFullYear() + 1);
    mes = fin.getMonth() - actual.getMonth();
    if (mes < 0) { mes = 12 + mes };
    dia = fin.getDate() - actual.getDate();
    if (dia < 0) { dia = 30 + dia };
    hora = fin.getHours() - (actual.getHours() + 1);
    if (hora < 0) { hora = 24 + hora };
    min = fin.getMinutes() - (actual.getMinutes() + 1);
    if (min < 0) { min = 60 + min };
    sec = fin.getSeconds() - actual.getSeconds();
    if (sec < 0) { sec = 60 + sec };
    divConta = document.getElementById("contaAtras");
    if (ano != 0) divConta.innerHTML = ano + " anos " + mes + " meses " + dia + " dias " + hora + " horas " + min + " minutos " + sec + " segundos";
    if (ano == 0) divConta.innerHTML = mes + " meses " + dia + " dias " + hora + " horas " + min + " minutos " + sec + " segundos";
    if (ano == 0 && mes == 0) divConta.innerHTML = dia + " dias " + hora + " horas " + min + " minutos " + sec + " segundos";
    if (ano == 0 && mes == 0 && dia == 0) divConta.innerHTML = hora + " horas " + min + " minutos " + sec + " segundos";
    if (ano == 0 && mes == 0 && dia == 0 && hora == 0) divConta.innerHTML = min + " minutos " + sec + " segundos";
    if (ano == 0 && mes == 0 && dia == 0 && hora == 0 && min == 0) divConta.innerHTML = sec + " segundos";
  } else {
    divConta = document.getElementById("contaAtras");
    divConta.innerHTML = "Conta atras finalizada";
  }
}
function date4() {
  setInterval(contaAtras, 1000);
}
    </script>
</body>
</html> 