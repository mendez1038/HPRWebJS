<!DOCTYPE html>
<html lang="es">
<head>
    <title>Exercizo Cookie 2</title>
    <meta charset="UTF-8">
<script>
function setCookie(nome, valor, exdays) {
    var d = new Date();
    d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
    var expires = "expires="+d.toUTCString();
    document.cookie = nome + "=" + valor + ";" + expires + ";path=/";
  }
  
  function getCookie(nome) {
    var name = nome + "=";
    var ca = document.cookie.split(';');
    for(var i = 0; i < ca.length; i++) {
      var c = ca[i];
      while (c.charAt(0) == ' ') {
        c = c.substring(1);
      }
      if (c.indexOf(name) == 0) {
        return c.substring(name.length, c.length);
      }
    }
    return "";
  }

 function checkCookie() {
     var user = getCookie("user");
     if (user == "") {
         if (confirm("Esta página utiliza cookies.")) {
            var userName = prompt("Cal é o teu nome?") 
            setCookie("user", userName, 365, 0);
            setCookie("count", "1", 365);
            alert("Aceptaste las cookies de la página." + user);
           }else{
            alert("No aceptaste las cookies de la página.");
           }
     }else{
         var countCookie = getCookie("count");
          countCookie = parseInt(countCookie, 10);
         if(countCookie < 10){
            countCookie++;
            setCookie("count", countCookie, 365);
         }
         if(countCookie == 10){ 
            setCookie("count", "", 365); 
            setCookie("user", "", 365);
         }
          
         alert("Bienvenido de nuevo " +  user + " entraste " + (countCookie-1) + " veces desde que aceptaste la cookies.");
     }
}

</script>
</head>
<body onload="checkCookie()">
    <h1>Ejercicio Cookies 2</h1>
    <p>Modifica a actividade anterior para que nos volva repetir o aviso cada 10 entradas na páxina.</p>
</body>
</html>